<?xml version="1.0" encoding="utf-8" ?>
<ThingDefs>
  
  <!-- BASES -->
  
  <!-- Buildings base -->
  <ThingDef Name="CarnBuilding" Abstract="True">
    <category>Building</category>
	<thingClass>Building</thingClass>
	<soundImpactDefault>BulletImpactWood</soundImpactDefault>
    <selectable>true</selectable>
    <drawerType>MapMeshAndRealTime</drawerType>
    <terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
    <repairEffect>Repair</repairEffect>
    <leaveResourcesWhenKilled>true</leaveResourcesWhenKilled>
    <filthLeaving>BuildingRubble</filthLeaving>
	<scatterableOnMapGen>false</scatterableOnMapGen>
	<isSaveable>true</isSaveable>
	
	<minifiedDef>MinifiedFurniture</minifiedDef>
	
  </ThingDef>
  
  <!-- Tent base -->
  <ThingDef Name="CarnTent" ParentName="CarnBuilding" Abstract="True">
    <thingClass>Carnivale.Building_Tent</thingClass>
	<blueprintClass>Carnivale.Blueprint_StuffHacked</blueprintClass>
	
	<altitudeLayer>PawnUnused</altitudeLayer>
	<pathCost>0</pathCost>
	<passability>Standable</passability>
	
	<rotatable>true</rotatable>
	<hasInteractionCell>true</hasInteractionCell>
	
	<blockWind>true</blockWind>
	<holdsRoof>true</holdsRoof>
	<!--
	<castEdgeShadows>true</castEdgeShadows>
	<staticSunShadowHeight>1.0</staticSunShadowHeight>
	-->
	
	<repairEffect>Sow</repairEffect>
	<resourcesFractionWhenDeconstructed>1.0</resourcesFractionWhenDeconstructed>
	
	<damageMultipliers>
	  <li>
	    <damageDef>Flame</damageDef>
		<multiplier>2</multiplier>
	  </li>
	  <li>
	    <damageDef>Burn</damageDef>
		<multiplier>2</multiplier>
	  </li>
    </damageMultipliers>
	
	<building>
	  <isEdifice>false</isEdifice>
	  <ignoreNeedsPower>true</ignoreNeedsPower>
	</building>
	
	<placeWorkers>
	  <li>PlaceWorker_NotUnderRoof</li>
	</placeWorkers>
	
	<designationCategory>Structure</designationCategory>
  </ThingDef>
  
  
  <!-- Stall base -->
  <ThingDef Name="CarnStall" ParentName="CarnBuilding" Abstract="True">
    <thingClass>Carnivale.Building_Carn</thingClass>
	<blueprintClass>Carnivale.Blueprint_StuffHacked</blueprintClass>
	
	<altitudeLayer>PawnUnused</altitudeLayer>
	<pathCost>15</pathCost>
	<passability>Standable</passability>
	
	<rotatable>false</rotatable>
	<blockWind>true</blockWind>
	<holdsRoof>false</holdsRoof>
	<castEdgeShadows>false</castEdgeShadows>
	<resourcesFractionWhenDeconstructed>1.0</resourcesFractionWhenDeconstructed>
	
	<damageMultipliers>
	  <li>
	    <damageDef>Flame</damageDef>
		<multiplier>2</multiplier>
	  </li>
	  <li>
	    <damageDef>Burn</damageDef>
		<multiplier>2</multiplier>
	  </li>
    </damageMultipliers>
	
	<building>
	  <isEdifice>false</isEdifice>
	  <ignoreNeedsPower>true</ignoreNeedsPower>
	</building>
	
	<placeWorkers>
	  <li>PlaceWorker_NotUnderRoof</li>
	</placeWorkers>
	
	<designationCategory>Structure</designationCategory>
	
  </ThingDef>
  
  
  
  <!-- END BASES -->
  
  
  
  
  
  <!-- Entry sign -->
  <ThingDef ParentName="CarnStall">
    <defName>Carn_SignEntry</defName>
	
	<label>entrance</label>
	<description>Come one, come all! The Carnival is in town!</description>
	
	<graphicData>
	  <texPath>Carnivale/Building/EntrySign</texPath>
	  <graphicClass>Graphic_Multi</graphicClass>
	  <shaderType>CutoutComplex</shaderType>
	  <drawSize>(6,3)</drawSize>
	  
	  <damageData>
	    <rect>(1.15,1.15,5.85,1.85)</rect>
	  </damageData>
	</graphicData>
	
	<size>(6,3)</size>
	
	<stuffCategories>
	  <li>StuffedCrate</li>
	</stuffCategories>
	
	<costList>
	  <Carn_Crate_Stall>1</Carn_Crate_Stall>
	</costList>
	
	<statBases>
	  <MaxHitPoints>250</MaxHitPoints>
	  <Flammability>1.5</Flammability>
	  <WorkToBuild>850</WorkToBuild>
	  <Mass>10</Mass>
	  <Beauty>12</Beauty>
	</statBases>
	
	<comps>
	  <li Class="Carnivale.CompProperties_CarnBuilding">
	    <type>128</type> <!-- Entrance = 128 -->
		<interiorThings>
		  <li>
		    <thingDef>TorchLamp</thingDef>
			<placementOffsets>
			  <li>(-1,0,-1)</li>
			  <li>(2,0,-1)</li>
			</placementOffsets>
		  </li>
		</interiorThings>
	  </li>
	</comps>
	
  </ThingDef>
  
  
  <!-- Tent small (manager tent) -->
  <ThingDef ParentName="CarnTent">
    <defName>Carn_TentSmallMan</defName>
	
	<label>manager's tent</label>
	<description>The tent where the manager sleeps.</description>
	
	<graphicData>
	  <texPath>Carnivale/Building/TentSquare</texPath>
	  <graphicClass>Graphic_Multi</graphicClass>
	  <shaderType>CutoutComplex</shaderType>
	  <drawSize>(5.25,5.25)</drawSize>
	  <allowFlip>false</allowFlip>
	  
	  <damageData>
	    <rect>(1,1,4,4)</rect>
	  </damageData>
	</graphicData>
	
	<size>(5,5)</size>
	<interactionCellOffset>(0,0,-3)</interactionCellOffset>
	
	<stuffCategories>
	  <li>StuffedCrate</li>
	</stuffCategories>
	
	<costList>
	  <Carn_Crate_TentMan>1</Carn_Crate_TentMan>
	</costList>
	
	<statBases>
	  <MaxHitPoints>150</MaxHitPoints>
	  <Flammability>1.5</Flammability>
	  <WorkToBuild>2000</WorkToBuild>
	  <Mass>25</Mass> <!-- 5 * 5 -->
	  <Beauty>90</Beauty>
	</statBases>
	
	<comps>
	  <li Class="Carnivale.CompProperties_CarnBuilding">
	    <type>69</type> <!-- Tent | Bedroom | ManagerOnly = 69 -->
		<interiorThings>
		  <li>
		    <thingDef>DoubleBed</thingDef>
			<placementOffsets>
			  <li>(0,0,1)</li>
			</placementOffsets>
		  </li>
		  <li>
		    <thingDef>TorchLamp</thingDef>
			<placementOffsets>
			  <li>(-1,0,-1)</li>
			</placementOffsets>
		  </li>
		</interiorThings>
	  </li>
	</comps>

  </ThingDef>
  
  
  <!-- Tent medium (beds) -->
  <ThingDef ParentName="CarnTent" Name="TentMedBed">
    <defName>Carn_TentMedBed</defName>
	
	<label>lodging tent</label>
	<description>A medium tent for carnies to sleep in. Contains 8 sleeping spots.</description>
	
	<graphicData>
	  <texPath>Carnivale/Building/TentSquare</texPath>
	  <graphicClass>Graphic_Multi</graphicClass>
	  <shaderType>CutoutComplex</shaderType>
	  <drawSize>(7.15,7.15)</drawSize>
	  <allowFlip>false</allowFlip>
	  
	  <damageData>
	    <rect>(1,1,6,6)</rect>
	  </damageData>
	</graphicData>
	
	<size>(7,7)</size>
	<interactionCellOffset>(0,0,-4)</interactionCellOffset>
	
	<stuffCategories>
	  <li>StuffedCrate</li>
	</stuffCategories>
	
	<costList>
	  <Carn_Crate_TentLodge>1</Carn_Crate_TentLodge>
	</costList>
	
	<statBases>
	  <MaxHitPoints>250</MaxHitPoints>
	  <Flammability>1.5</Flammability>
	  <WorkToBuild>2500</WorkToBuild>
	  <Mass>49</Mass> <!-- 7 * 7 -->
	  <Beauty>50</Beauty>
	</statBases>
	
	<comps>
	  <li Class="Carnivale.CompProperties_CarnBuilding">
	    <type>5</type> <!-- Tent | Bedroom == 5 -->
		<interiorThings>
		  <li>
		    <thingDef>SleepingSpot</thingDef>
			<placementOffsets>
			  <li>(-2,0,2)</li>
		      <li>(-1,0,2)</li>
		      <li>(1,0,2)</li>
		      <li>(2,0,2)</li>
		      <li>(-2,0,-1)</li>
		      <li>(-1,0,-1)</li>
		      <li>(1,0,-1)</li>
		      <li>(2,0,-1)</li>
			</placementOffsets>
		  </li>
		  <li>
		    <thingDef>TorchLamp</thingDef>
			<placementOffsets>
			  <li>(0,0,0)</li>
			</placementOffsets>
		  </li>
		</interiorThings>
	  </li>
	</comps>
	
  </ThingDef>
  
  
  <!-- Tent huge -->
  <ThingDef ParentName="CarnTent">
    <defName>Carn_TentHuge</defName>
	
	<label>chapiteau</label>
	<description>A large tent intended to house the main event.</description>
	
	<graphicData>
	  <texPath>Carnivale/Building/TentHuge</texPath>
	  <graphicClass>Graphic_Multi</graphicClass>
	  <shaderType>CutoutComplex</shaderType>
	  <drawSize>(13,13)</drawSize>
	  <allowFlip>false</allowFlip>
	  
	  <damageData>
	    <rect>(1,1,10,10)</rect>
	  </damageData>
	</graphicData>
	
	<size>(11,11)</size>
	<interactionCellOffset>(0,0,-6)</interactionCellOffset>
	
	<stuffCategories>
	  <li>StuffedCrate</li>
	</stuffCategories>
	
	<costList>
	  <Carn_Crate_TentLodge>1</Carn_Crate_TentLodge>
	</costList>
	
	
	<statBases>
	  <MaxHitPoints>250</MaxHitPoints>
	  <Flammability>1.5</Flammability>
	  <WorkToBuild>3600</WorkToBuild>
	  <Mass>121</Mass> <!-- 11 * 11 -->
	  <Beauty>243</Beauty>
	</statBases>
	
	<comps>
	  <li Class="Carnivale.CompProperties_CarnBuilding">
	    <type>9</type> <!-- Tent | Attraction = 9 -->
		<interiorThings>
		  <li>
		    <thingDef>TorchLamp</thingDef>
			<placementOffsets>
			  <li>(0,0,0)</li>
			</placementOffsets>
		  </li>
		</interiorThings>
	  </li>
	</comps>
	
  </ThingDef>
  
  
  <!-- Food stall -->
  <ThingDef Name="FoodStall" ParentName="CarnStall">
    <defName>Carn_StallFood</defName>
	
	<label>food stall</label>
	<description>Where the food at.</description>
	
	<graphicData>
	  <texPath>Carnivale/Building/Stall_Food</texPath>
	  <graphicClass>Graphic_Single</graphicClass>
	  
	  <drawSize>(3,3)</drawSize>
	  <damageData>
	    <rect>(0.2,0.2,2.8,0.8)</rect>
	  </damageData>
	</graphicData>
	
	<size>(3,3)</size>
	
	<stuffCategories>
	  <li>StuffedCrate</li>
	</stuffCategories>
	
	<costList>
	  <Carn_Crate_Stall>1</Carn_Crate_Stall>
	</costList>
	
	<statBases>
	  <MaxHitPoints>250</MaxHitPoints>
	  <Flammability>1.5</Flammability>
	  <WorkToBuild>850</WorkToBuild>
	  <Mass>10</Mass>
	  <Beauty>12</Beauty>
	</statBases>
	
	<comps>
	  <li Class="Carnivale.CompProperties_CarnBuilding">
	    <type>34</type> <!-- Stall | Vendor = 34 -->
		<interiorThings>
		  <li>
		    <thingDef>TorchLamp</thingDef>
			<placementOffsets>
			  <li>(-1,0,-1)</li>
			  <li>(1,0,-1)</li>
			</placementOffsets>
		  </li>
		</interiorThings>
	  </li>
	</comps>
	
  </ThingDef>
  
  
  <!-- Curios stall -->
  <ThingDef ParentName="FoodStall">
    <defName>Carn_StallCurios</defName>
	
	<label>curios stall</label>
	<description>'You break it, you buy it.'\n\n'No refunds.'</description>
	
    <graphicData>
	  <texPath>Carnivale/Building/Stall_Curios</texPath>
	  <graphicClass>Graphic_Single</graphicClass>
	  
	  <drawSize>(3,3)</drawSize>
	  <damageData>
	    <rect>(0.2,0.2,2.8,0.8)</rect>
	  </damageData>
	</graphicData>
	
  </ThingDef>
  
  
  <!-- Surplus stall -->
  <ThingDef ParentName="FoodStall">
    <defName>Carn_StallSurplus</defName>
	
	<label>surplus stall</label>
	<description>If carnies have any excess, you bet they're gonna make a profit off it.</description>
	
    <graphicData>
	  <texPath>Carnivale/Building/Stall_Surplus</texPath>
	  <graphicClass>Graphic_Single</graphicClass>
	  
	  <drawSize>(3,3)</drawSize>
	  <damageData>
	    <rect>(0.2,0.2,2.8,0.8)</rect>
	  </damageData>
	</graphicData>
	
  </ThingDef>
  
  
  
</ThingDefs>